# 体检结论生成-20180425

## 本周工作：br训练

### 1. 修改linear regression模型

* 设置loss_multi，使预训练过的参数变化的慢，没有预训练过的参数变化的快。1000个数据（20维），600个预训练（10维），200个直接训练：

![](https://github.com/WindsOfWinter/picture/blob/master/426%201.png)

* 随着预训练维度的变化，learning rate要调整，否则有的情况下会不收敛。若用更多的数据直接训练（让直接训练已经收敛得很好），则预训练体现不出效果。

### 2. 用基于linear regression的br训练

* 选取训练树的一支：0-1-2-6-23-37-54 （54包含23个特征）

* 一步一步训练到54（用1000个数据）：hamming loss: 0.017, accuracy: 0.2

* 直接训练54（这1000个数据中有54的过少，无法收敛，所以用了5000个数据中有54的）：hamming loss: 0.024, accuracy：0.11

* 所以有预训练效果是好的。准确率都很低应该是只训练了这一支的原因。

* 训练过程中learning rate要随着调整。

### 3. 计划

* 用br把所有数据都训练完看看准确率。

* 尝试别的多标签学习算法。

### 4. tips

* 要保存格式不规则的数据，可以用pickle包

* 多次调用一个定义了tensorflow的graph的函数，因为之前的图好像没有删掉，运算会越来越慢。所以函数里要每次将graph重新初始化。