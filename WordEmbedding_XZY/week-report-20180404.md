# 词嵌入周报20180404


## 计划

将思路转向文本扩写，即通过关键词生成一段文本。

## 本周工作



### 1. 用gpu完成上周提到的github程序：RNN_Text_Generation_TensorFlow


上周找到的几个文本生成代码中，有一个是输入莎士比亚文本，训练出模型，然后在测试时给出一个开头，即可生成一个模仿莎士比亚的文本(给出上文预测下文模型）。由此联想到如果训练出体检报告模型，给出一个疾病关键词作为开头，生成完整文本的思路，于是尝试复现代码：

代码链接：https://github.com/spiglerg/RNN_Text_Generation_Tensorflow
当batch为20000时：

测试结果

![此处输入图片的描述][1]

可见结果并不好

由此将batch改为50000：

![此处输入图片的描述][2]

分析：因为训练的单位非word，而是character，可以尝试将其改为word单位。

### 2. 查找扩写的相关资料


资料摘自：https://blog.csdn.net/qq_40027052/article/details/78794991


流程图

![此处输入图片的描述][3]

 
- 

 首先根据输入的数据类型不同，进行不同的处理。如果输入的是关键词，则在语料库中选择和输入关键词相同的语句。如果输入的是一个句子，那么就在语料库中选择和输入语句相似度大于指定阈值的句子。
 
- 语句相似度计算：

- 首先对待计算的两个语句进行分词处理，对于分词后的语句判断其是否满足模板变换，如果满足则直接将语句放入候选集，并且设置相似度为0。如果不满足则进入到步进行计算。
 
- 判断两个语句是否满足模板变换的流程图：

- （1）首先判断分词后，两个句子的词是不是完全一样，而只是位置不同，如果是则满足模板变换的条件。

- （2）如果词不完全相同，就看看对不同的词之间是否可以进行同义词变换，如果能够进行同义词变换，并且变换后的语句两个句子去公共词的集合，该集合若为某一句话的全部词集合，则也满足模板变换条件。
 
- （3）如果上述两个步骤都不满足，则两个句子之间不满足模板变换。则对两个句子剩余的词，计算两两距离，距离小于阈值的则替换为同一个。**此处可以应用词嵌入的相似度概念**。替换完成后，使用bi-gram计算替换前后两个语句的相似度。
 
- 完成候选语句的提取之后，就要根据候选语句的数量来判断后续操作了。如果筛选的候选语句大于等于要求的数量，则按照句子相似度由低到高选取指定数量的句子。否则要进行句子的复写。这里采用同义词替换和根据指定模板进行改写的方案。
 
- 句子复写则根据实现手段的不同，大致可以分为如下几种。

 
- **基于同义词的改写方法。这种方法是词汇级别的，能够在很大程度上保证替换后的文本与原文语义一致。缺点就是会造成句子的通顺度有所降低，当然可以结合隐马尔科夫模型对于句子搭配进行校正提升整体效果。**

 
- **基于模板的改写方法。该方法的基本思想是，从大量收集的语料中统计归纳出固定的模板，系统根据输入句子与模板的匹配情况，决定如何生成不同的表达形式**。
 
- **基于统计模型和语义分析生成模型的改写方法。这类方法就是根据语料库中的数据进行统计，获得大量的转换概率分布，然后对于输入的语料根据已知的先验知识进行替换。这类方法的句子是在分析结果的基础上进行生成的，从某种意义上说，生成是在分析的指导下实现的，因此，改写生成的句子有可能具有良好的句子结构。但是其所依赖的语料库是非常大的，这样就需要人工标注很多数据。对于这些问题，新的深度学习技术可以解决部分的问题。同时结合知识图谱的深度学习，能够更好地利用人的知识，最大限度地减少对训练样本的数据需求。-RNN/LSTM模型**


-------------------------------------------------------------

由上文内容可得，共有三个思路，同义词改写，模板改写，深度学习方法。各方法各有优劣，接下来的工作可以从这三点出发。

### 3. 相似度的扩写思路

基本思路是以所有体检报告语句作为训练集，训练出一个文本模型，输入一个疾病特征关键词（句），通过该关键词（句）与语料库中的语句相似度比较，相似度高于阈值的语句作为输出，即实现文本报告的自动生成。
在github中找到了一个相似度比较的开源代码：

https://github.com/WenDesi/sentenceSimilarity

其主要实现了两段中文文本的语句相似度比较。并作出相似度打分。
运行结果如下：

![此处输入图片的描述][4]

**由此延伸:将比较的两段文本改为关键词文本和体检报告文本语料库，通过比较关键词文本与语料文本每一句的相似度，输出高于一个阈值的所有文本，实现从关键词到文本的文本生成。**


##下周目标 

按上文的思路进行代码的编写，尝试实现一个文本生成雏形。
  


  
[1]: https://s18.postimg.org/jrid1kpcp/20180404152204.png
  
[2]: https://s18.postimg.org/rk90tkard/20180404152410.png
  
[3]: https://s18.postimg.org/xdno7o1g9/20171213155319860.png
  
[4]: https://s18.postimg.org/4hn38ee61/20180404164400.png