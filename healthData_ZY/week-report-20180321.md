# 健康体检数据周报20180326--前期工作概要

## 数据预处理
### oracle数据库SQL
* 网查代谢综合征标准，确定诊断代谢综合征的指标。从总体检单表TIJIANDTJXM里根据所需指标，筛选出对应项目信息。再根据tijianbm，和体检者TIJIANZHE表关联，将个人信息关联到大表里。同样将tijianrq关联过去。

* 注意：筛选指标时，不要去项目字典表TIJIANXM里选取项目，字典表不全。有些需要的项目，项目编码不存在于字典表里，所以需要全部从总体检单表TIJIANDTJXM找。同时选取了病史、生活习惯、服药史等可能相关的项目信息。

* 数据库这块主要工作在于选取所有需要的信息，包括体检者的个人信息（用于做人的标记，判断是不是同一个人）和所有需要作为feature的项目及结果。

* 产出两张表，两张表可利用tijianbm关联。表data_result包含tijianbm和所有需要作为features的项目及结果，4295651条项目。表data_peopleInfo包含tijianbm和体检者的个人信息、体检日期（与data_result对应，有重复）。

### R预处理（pretreatment.R）
* 完成根据tijianbm将各项指标放到纵列。

* 根据代谢综合征的标准（5条判断标准，满足其中3条即代谢综合征，label为1），标记label。判定代谢综合征的feature若有缺失则删除。

* 根据tijianbm将个人信息关联，并据其个人信息增加patientId列按照一定规则标记为一个人。

* 同一个人两次相邻体检，tijianrq在半年到两年之间，将次年y作为y2放到这一年里。输出df6。共96671条。

## 结果：
* y=0；y2=1；6182
* y=1；y2=1；10978
* y=0；y2=0；74425
* y=1；y2=0；5086
